<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="FairyGold - Your #1 OSRS Services Hub. Fast, Trusted, and Affordable.">
  <meta name="keywords" content="OSRS Services, FairyGold, Old School RuneScape, Gold, Powerleveling, Quests">
  <meta name="author" content="FairyGold Team">
   <link rel="icon" type="image/png" href="../img/eldorado.webp">

<meta property="og:description" content="FairyGold offers the best Old School RuneScape (OSRS) services including gold buying and selling, powerleveling, questing, PvM, account builds, and Group Ironman support. Trusted by thousands for fast, secure, and affordable RuneScape services. Get instant delivery, 24/7 support, and unbeatable prices at FairyGold.">
<meta name="twitter:description" content="FairyGold offers the best Old School RuneScape (OSRS) services including gold buying and selling, powerleveling, questing, PvM, account builds, and Group Ironman support. Trusted by thousands for fast, secure, and affordable RuneScape services. Get instant delivery, 24/7 support, and unbeatable prices at FairyGold.">
<meta property="og:title" content="FairyGold - OSRS Gold & Services">
<meta property="og:site_name" content="FairyGold">
<meta property="og:image" content="https://voltia1.github.io/FairyGold/img/eldorado.webp">
<!-- <meta property="og:url" content="https://yourdomain.com/"> -->
<meta property="og:type" content="website">

  <title>FairyGold - OSRS Services</title>
  <link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="../css/body.css">
  <link rel="stylesheet" href="../css/navbar.css">
  <link rel="stylesheet" href="../css/item.css">
  <link rel="stylesheet" href="../css/pagination.css">
  <link rel="stylesheet" href="../css/sidebar.css">
  <style>
    #sheet-table {
      overflow-x: visible !important;
    }
    
    .hero {
      padding: 100px 0;
      text-align: center;
      color: gold;
    }
    .hero h1 {
      font-size: 3.5rem;
      font-weight: 700;
    }
    .hero p {
      font-size: 1.25rem;
      color: #ffd700;
    }
@media (max-width: 450px) {
  .hero h1 {
    font-size: 1.7rem;
  }
}
    .btn-gold {
      background-color: gold;
      color: #000;
      border: none;
      padding: 12px 30px;
      font-weight: 600;
      border-radius: 30px;
      transition: 0.3s ease;
    }
    .btn-gold:hover {
      background-color: #d4af37;
      color: #fff;
    }
    .section {
      padding: 80px 0;
    }
    .section-title {
      font-size: 2rem;
      font-weight: 600;
      color: gold;
      margin-bottom: 40px;
      text-align: center;
    }
    #sheet-data .container {
      padding-top: 32px;
    }
    #sheet-table .row {
      overflow: visible !important;
    }
   .container,
    #sheet-table,
    #sheet-table .table-responsive {
      background: transparent !important;
      box-shadow: none !important;
    }
    
#sheet-table {
  min-height: 600px; /* Adjust as needed for your grid */
  transition: min-height 0.2s;
}
#category-filter,
#category-filter option {
  background: #181818 !important;
  color: gold !important;
  font-weight: 600;
}
   footer {
      background-color: #000;
      color: #ccc;
      padding: 40px 0;
      text-align: center;
    }





  
  </style>
</head>
<body>
<nav class="navbar navbar-expand-lg custom-navbar shadow-sm">
  <div class="container-fluid px-lg-5">
    <!-- Logo Far Left -->
    <a class="navbar-brand fw-bold me-0" href="#" style="color: gold;">
      <img src="../img/eldorado.webp" alt="A golden fairy with blue wings sitting gracefully on a pile of gold coins, surrounded by a magical and whimsical atmosphere" style="height: 40px; width: 35px; object-fit: contain; vertical-align: middle;">
      FairyGold
    </a>
    <!-- Toggler for mobile -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <!-- Centered Nav Links -->
    <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
      <ul class="navbar-nav mx-auto">
        <li class="nav-item">
          <a class="nav-link" aria-current="page" href="../">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../">Services</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../">Payments</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#sheet-data">GIM Store</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://discord.gg/fairygold" target="_blank">
            <i class="fa-brands fa-discord"></i> Discord
          </a>
        </li>
      </ul>
      <!-- Cart Far Right -->
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a id="cart-toggle" class="nav-link" href="javascript:void(0)">
            <i class="fa fa-shopping-cart"></i> Cart (<span id="cart-count">0</span>)
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>
<!-- HERO SECTION -->
<section class="hero animate-fade-in">
  <div class="container">
    <h1>FairyGold Services</h1>
    <p>All Your OSRS Needs in One Place - Trusted, Fast, and Affordable</p>
    
  </div>
</section>

<section class="section text-center animate-fade-in" id="sheet-data">
  <div class="container mb-4" id="item-filters">
    <div class="row g-3 align-items-center justify-content-center">
      <div class="col-12 col-md-5">
        <input type="text" id="item-search" class="form-control form-control-lg rounded-pill shadow-sm" placeholder="Search items...">
      </div>
      <div class="col-12 col-md-4">
        <select id="category-filter" class="form-select form-select-lg rounded-pill shadow-sm">
          <option value="">All Categories</option>
          <!-- Categories will be filled by JS -->
        </select>
      </div>
    </div>
  </div>
  <div class="container">
    <h2 class="section-title">GIM Price Calculator</h2>
    <div id="sheet-table" class="table-responsive"></div>
    <div id="pagination" class="d-flex justify-content-center mt-3"></div>
  </div>
</section>
<!-- DISCORD & CONTACT -->
<section class="section bg-dark text-center animate-fade-in">
  <div class="container">
    <h2 class="section-title">Join Our Discord</h2>
    <p>Open a ticket and get started instantly with our team!</p>
    <a href="https://discord.gg/fairygold" target="_blank" class="btn btn-gold mt-3">Join Discord</a>
  </div>
</section>

<!-- FOOTER -->
<footer>
  <div class="container">
    <p class="mb-0">&copy; 2025 FairyGold. All rights reserved.</p>
  </div>
</footer>


<!-- Cart Sidebar -->
<div id="cart-sidebar" style="position:fixed;top:0;right:-400px;width:350px;height:100vh;background:#181818;color:gold;z-index:1100;box-shadow:-2px 0 16px #000a;transition:right 0.3s;padding:24px 18px 18px 18px;overflow-y:auto;">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4 class="mb-0">Your Cart</h4>
    <button id="cart-close" class="btn btn-sm btn-danger">&times;</button>
  </div>
  <div id="cart-items"></div>
  <hr>
  <div class="d-flex justify-content-between align-items-center mt-3">
  <div>
    <strong>Total:</strong>
    <span id="cart-total">0</span>
  </div>
  <a href="https://discord.gg/vudZu6W8RR" target="_blank" id="purchase-btn" class="btn btn-gold ms-2">Purchase</a>
</div>
</div>
<script>
  const animatedItems = document.querySelectorAll('.animate-fade-in');
  animatedItems.forEach((el, i) => {
    el.style.animationDelay = `${i * 0.2}s`;
  });

  fetch('https://opensheet.elk.sh/11ELp-eBwvd14yK6UkboyYgWpsq0Gbb92SLao8iewcWY/Database')
    .then(res => res.json())
    .then(data => {
      let allData = data.filter(row => row.Price && !isNaN(Number(row.Price.replace(/,/g, ''))));
      let categories = [...new Set(allData.map(row => row.Category).filter(Boolean))];
      const sheetTable = document.getElementById('sheet-table');
      const categoryFilter = document.getElementById('category-filter');
      const searchInput = document.getElementById('item-search');
      const pagination = document.getElementById('pagination');
      let currentPage = 1;
      const itemsPerPage = 18;
      let filtered = allData;

      // Fill category dropdown
      categories.forEach(cat => {
        const opt = document.createElement('option');
        opt.value = cat;
        opt.textContent = cat;
        categoryFilter.appendChild(opt);
      });

      function render(items, page = 1) {
  let start = (page - 1) * itemsPerPage;
  let end = start + itemsPerPage;
  let paged = items.slice(start, end);
  let html = '<div class="row justify-content-center g-2">';
  paged.forEach(row => {
    let priceNum = Number(row.Price.replace(/,/g, ''));
    let displayPrice = priceNum;
    if (priceNum >= 1000 && priceNum < 1000000) {
      displayPrice = (priceNum / 1000).toLocaleString(undefined, {maximumFractionDigits: 2}) + 'K';
    } else if (priceNum >= 1000000 && priceNum < 1000000000) {
      displayPrice = (priceNum / 1000000).toLocaleString(undefined, {maximumFractionDigits: 2}) + 'M';
    } else if (priceNum >= 1000000000) {
      displayPrice = (priceNum / 1000000000).toLocaleString(undefined, {maximumFractionDigits: 2}) + 'B';
    }
html += `
  <div class="col-6 col-md-4 col-lg-3 col-xl-2 mb-4">
    <div class="item-card text-center border-0">
      ${row.Link ? `<img src="${row.Link}" alt="${row["Item Name"] || ''}">` : ''}
      <h6>${row["Item Name"] || ''}</h6>
      <div class="text-gold">${displayPrice}</div>
      <div class="mb-2 controls">
        <input type="number" min="1" value="1" class="form-control form-control-sm d-inline-block" style="width:60px;" id="qty-${row["Item Name"]}">
        <button class="btn btn-sm btn-gold add-to-cart" data-item='${JSON.stringify(row).replace(/'/g,"&#39;")}' data-name="${row["Item Name"]}">Add</button>
      </div>
      
    </div>
  </div>
`;
  });
  html += '</div>';
  sheetTable.innerHTML = html;
  // Animate items one by one
  const cards = sheetTable.querySelectorAll('.item-card');
  cards.forEach((card, i) => {
    setTimeout(() => {
      card.classList.add('visible');
    }, i * 80); // 80ms delay between each
  });
  renderPagination(items.length, page);
}

  let windowSize = window.innerWidth < 460 ? 1 : 3;

window.addEventListener('resize', () => {
  const newWindowSize = window.innerWidth < 460 ? 1 : 3;
  if (newWindowSize !== windowSize) {
    windowSize = newWindowSize;
    renderPagination(filtered.length, currentPage);
  }
});

function renderPagination(totalItems, page) {
  let totalPages = Math.ceil(totalItems / itemsPerPage);
  let html = '';
  if (totalPages > 1) {
    html += `<nav><ul class="pagination pagination-sm mb-0">`;

    // Prev button
    if (page > 1) {
      html += `<li class="page-item"><button class="page-prev" data-page="${page - 1}">&lt; Prev</button></li>`;
    } else {
      html += `<li class="page-item disabled"><span class="page-prev">&lt; Prev</span></li>`;
    }

    // Use the global windowSize variable
    let start = Math.max(2, page - Math.floor(windowSize / 2));
    let end = Math.min(totalPages - 1, start + windowSize - 1);

    // Adjust start if we're near the end
    if (end > totalPages - 1) {
      end = totalPages - 1;
      start = Math.max(2, end - windowSize + 1);
    }

    // Always show first page
    html += `<li class="page-item${page === 1 ? ' active' : ''}"><button class="page-link" data-page="1">1</button></li>`;

    // Ellipsis before window
    if (start > 2) {
      html += `<li class="page-ellipsis">…</li>`;
    }

    // Page numbers window
    for (let i = start; i <= end; i++) {
      html += `<li class="page-item${i === page ? ' active' : ''}"><button class="page-link" data-page="${i}">${i}</button></li>`;
    }

    // Ellipsis after window
    if (end < totalPages - 1) {
      html += `<li class="page-ellipsis">…</li>`;
    }

    // Always show last page if more than 1
    if (totalPages > 1) {
      html += `<li class="page-item${page === totalPages ? ' active' : ''}"><button class="page-link" data-page="${totalPages}">${totalPages}</button></li>`;
    }

    // Next button
    if (page < totalPages) {
      html += `<li class="page-item"><button class="page-next" data-page="${page + 1}">Next &gt;</button></li>`;
    } else {
      html += `<li class="page-item disabled"><span class="page-next">Next &gt;</span></li>`;
    }

    html += `</ul></nav>`;
  }
  pagination.innerHTML = html;
  // Add event listeners only to enabled buttons
  pagination.querySelectorAll('button[data-page]').forEach(btn => {
    btn.addEventListener('click', e => {
      currentPage = Number(btn.dataset.page);
      render(filtered, currentPage);
    });
  });
}
      // Filter logic
      function filterAndRender() {
        let search = searchInput.value.toLowerCase();
        let cat = categoryFilter.value;
        filtered = allData.filter(row =>
          (!cat || row.Category === cat) &&
          (!search || (row["Item Name"] && row["Item Name"].toLowerCase().includes(search)))
        );
        currentPage = 1;
        render(filtered, currentPage);
      }

      // Initial render
      render(allData, currentPage);

      searchInput.addEventListener('input', filterAndRender);
      categoryFilter.addEventListener('change', filterAndRender);
    })
    .catch(() => {
      document.getElementById('sheet-table').innerHTML = '<p class="text-danger">Failed to load data.</p>';
    });
    let cart = {};

function updateCartDisplay() {
  const cartSidebar = document.getElementById('cart-sidebar');
  const cartItemsDiv = document.getElementById('cart-items');
  const cartCount = document.getElementById('cart-count');
  const cartTotal = document.getElementById('cart-total');
  let total = 0;
  let count = 0;
  let html = '';
Object.values(cart).forEach(item => {
  let priceNum = Number(item.Price.replace(/,/g, ''));
  let itemTotal = priceNum * item.qty;
  total += itemTotal;
  count += item.qty;
  html += `
    <div class="cart-item">
      ${item.Link ? `<img src="${item.Link}" alt="" class="cart-img">` : ''}
      <div class="cart-info">
        <div class="cart-row">
          <span class="cart-title">${item["Item Name"]}</span>
          <button class="btn remove-cart-item" data-name="${item["Item Name"]}" title="Remove">&times;</button>
        </div>
        <div class="cart-row mt-1">
          <div class="cart-qty-wrap">
            <input type="number" min="1" value="${item.qty}" class="form-control form-control-sm cart-qty-input" data-name="${item["Item Name"]}">
          </div>
          <span class="cart-price">${formatGoldPrice(itemTotal)} gp</span>
        </div>
      </div>
    </div>
  `;
});
function formatGoldPrice(num) {
  if (num >= 1_000_000_000) return (num / 1_000_000_000).toLocaleString(undefined, {maximumFractionDigits: 2}) + 'B';
  if (num >= 1_000_000) return (num / 1_000_000).toLocaleString(undefined, {maximumFractionDigits: 2}) + 'M';
  if (num >= 1_000) return (num / 1_000).toLocaleString(undefined, {maximumFractionDigits: 2}) + 'K';
  return num.toLocaleString();
}
cartItemsDiv.innerHTML = html || '<div class="text-muted">Cart is empty.</div>';
cartCount.textContent = count;
cartTotal.textContent = formatGoldPrice(total) ;
  // Remove item
  cartSidebar.querySelectorAll('.remove-cart-item').forEach(btn => {
    btn.onclick = () => {
      delete cart[btn.dataset.name];
      updateCartDisplay();
    };
  });
  // Change qty
  cartSidebar.querySelectorAll('.cart-qty-input').forEach(input => {
    input.onchange = () => {
      let val = Math.max(1, parseInt(input.value) || 1);
      cart[input.dataset.name].qty = val;
      updateCartDisplay();
    };
  });

}
// Cart sidebar toggle
document.getElementById('cart-toggle').onclick = () => {
  document.getElementById('cart-sidebar').style.right = '0';
};
document.getElementById('cart-close').onclick = () => {
  document.getElementById('cart-sidebar').style.right = '-400px';
};

// Add to cart logic (delegate after render)
document.addEventListener('click', function(e) {
  if (e.target.classList.contains('add-to-cart')) {
    const row = JSON.parse(e.target.dataset.item.replace(/&#39;/g,"'"));
    const qtyInput = document.getElementById('qty-' + row["Item Name"]);
    const qty = Math.max(1, parseInt(qtyInput.value) || 1);
   if (cart[row["Item Name"]]) {
  cart[row["Item Name"]].qty += qty;
} else {
  cart[row["Item Name"]] = {...row, qty};
}
updateCartDisplay();

// Add shake effect to cart button
const cartBtn = document.getElementById('cart-toggle');
cartBtn.classList.add('cart-shake');
setTimeout(() => cartBtn.classList.remove('cart-shake'), 600);
  }
});
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
